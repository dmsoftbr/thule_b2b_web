import{j as e,r as l,g as c,t as p,h as u}from"./index-C-yn2kxu.js";import{A as I}from"./app-page-header-B97b6w1v.js";import{S as v}from"./server-table-OrazAZj6.js";import{B as k}from"./index-Cj-kxx9Z.js";import{L as w}from"./label-PvIEZhsH.js";import{S as g,c as N}from"./search-combo-DoY-PKU3.js";import{u as L}from"./useQuery-BEMaX6S8.js";import{f as S}from"./number-utils-BjpbXa09.js";import{f as D}from"./string-utils-DZ7LWdPC.js";import{D as R,a as E,b as T,c as m,d as b}from"./dropdown-menu-3YsRMfS2.js";import{L as U}from"./loader-circle-BV1pYLGQ.js";import{C as P}from"./chevron-down-lpqsW9lE.js";import"./input-Dr2m_CVc.js";import"./app-tooltip-1VY1K540.js";import"./index-D5w6tM8m.js";import"./Combination-BJv6NSEb.js";import"./index-z0-V-lU6.js";import"./index-BoUYBFaC.js";import"./index-DRosYylb.js";import"./select-BqrgrOas.js";import"./index-Cap87g99.js";import"./index-Dtymrjkl.js";import"./search-8CyYJVSP.js";import"./funnel-CSCaqyL5.js";import"./chevron-left-DklgzkMt.js";import"./chevron-right-CCWYEIpL.js";import"./command-DF-KUbv3.js";import"./index-C8Qjzrxd.js";import"./popover-D4FvDG7G.js";import"./chevrons-up-down-DXmsIWP1.js";const F=()=>[{key:"id",dataIndex:"id",title:"Código",renderItem:t=>e.jsx("span",{className:"font-semibold text-blue-600 ",children:t.id}),sortable:!0},{key:"abbreviation",dataIndex:"abbreviation",title:"Nome Abreviado",renderItem:t=>e.jsx("span",{className:"font-semibold text-blue-600 ",children:t.abbreviation}),sortable:!0},{key:"name",dataIndex:"name",title:"Razão Social",renderItem:t=>e.jsx("span",{children:t.name}),sortable:!0},{key:"groupName",dataIndex:"groupName",title:"Descr.Grupo Cliente",renderItem:t=>e.jsx("span",{children:t.group?.name}),sortable:!0},{key:"address",dataIndex:"address",title:"Endereço",renderItem:t=>e.jsx("span",{children:t.address}),sortable:!0},{key:"city",dataIndex:"city",title:"Cidade",renderItem:t=>e.jsx("span",{children:t.city}),sortable:!0},{key:"state",dataIndex:"state",title:"UF",renderItem:t=>e.jsx("span",{children:t.state}),sortable:!0},{key:"documentNumber",dataIndex:"documentNumber",title:"CPF/CNPJ",renderItem:t=>e.jsx("span",{children:D(t.documentNumber)}),sortable:!0},{key:"contactName",dataIndex:"contactName",title:"Contato",renderItem:t=>e.jsx("span",{children:t.contactName}),sortable:!0},{key:"carrierId",dataIndex:"carrierId",title:"Transportadora",renderItem:t=>e.jsx("span",{children:t.carrier.abbreviation}),sortable:!0},{key:"discountPercent",dataIndex:"discountPercent",title:"% Desconto",renderItem:t=>e.jsx("span",{children:S(t.discountPercent,2)}),sortable:!1}],pe=function(){const[d,x]=l.useState([]),[n,i]=l.useState(!1),[h,f]=l.useState(new Date().valueOf()),{data:j}=L({queryKey:["representatives"],queryFn:async()=>{const{data:a}=await c.get("/registrations/representatives/all");return a}}),y=async()=>{i(!0);try{const a=await c.post("/reports/customers-list/pdf",{representatives:d},{responseType:"blob"}),s=new Blob([a.data],{type:"application/pdf"}),o=window.URL.createObjectURL(s),r=document.createElement("a");r.href=o,r.target="_blank",r.download="ListaDeClientes.pdf",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(o)}catch(a){p.error(u(a))}finally{i(!1)}},C=async()=>{i(!0);try{const a=await c.post("/reports/customers-list/xlsx",{representatives:d},{responseType:"blob"}),s=new Blob([a.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),o=window.URL.createObjectURL(s),r=document.createElement("a");r.href=o,r.target="_blank",r.download="ListaDeClientes.xlsx",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(o)}catch(a){p.error(u(a))}finally{i(!1)}};return e.jsxs(I,{titleSlot:"Lista de Clientes",children:[e.jsxs("div",{className:"p-2 flex gap-x-2",children:[e.jsxs("div",{className:"form-group flex-1",children:[e.jsx(w,{children:"Selecione o(s) Representante(s)"}),e.jsx(g,{disabled:n,multipleSelect:!0,onChange:()=>{},onSelectOption:a=>x(a.map(s=>Number(s.value))),staticItems:N(j??[],"id","abbreviation"),showSelectButtons:!0})]}),e.jsxs(R,{children:[e.jsx(E,{asChild:!0,children:e.jsx(k,{className:"mt-5",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:e.jsx(U,{className:"size-4 mr-2 animate-spin"})}),"Gerando..."]}):e.jsxs(e.Fragment,{children:["Gerar"," ",e.jsx("span",{children:e.jsx(P,{className:"size-4"})})]})})}),e.jsxs(T,{children:[e.jsx(m,{onClick:()=>f(new Date().valueOf()),children:"Em Tela"}),e.jsx(b,{}),e.jsx(m,{onClick:()=>y(),children:"Em PDF"}),e.jsx(b,{}),e.jsx(m,{onClick:()=>C(),children:"Em Excel"})]})]})]}),e.jsx("div",{className:"px-2 pb-2 relative",children:e.jsx(v,{isPending:n,hideToolbar:!0,additionalInfo:{representatives:d},columns:F(),dataUrl:"/registrations/customers/list-paged-by-reps",searchFields:[{id:"id",label:"Código"}]},h)})]})};export{pe as component};
