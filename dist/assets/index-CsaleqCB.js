import{j as e,r as d,e as I,t as T,i as z,g as E}from"./index-C-yn2kxu.js";import{P as A}from"./product-image-870267Xw.js";import{c as D,B as f}from"./index-Cj-kxx9Z.js";import{C as G,a as Q,c as F,b as H,d as K,e as M}from"./card-oCMkmh1O.js";import{f as C}from"./number-utils-BjpbXa09.js";import{A as N}from"./app-tooltip-1VY1K540.js";import{I as R}from"./input-Dr2m_CVc.js";import{C as L,F as U}from"./customers-combo-_cQgQrs3.js";import{D as B,e as $,a as J,b as V,c as _,d as Y,f as W}from"./dialog-o4W0LXdK.js";import{L as X}from"./label-PvIEZhsH.js";import{T as Z,a as ee,b as y,c as m,d as se,e as g,f as ae}from"./table-D5BP3akl.js";import{S as te}from"./shopping-cart-BhVaQztR.js";import{T as re}from"./trash-DuwzUJ5T.js";import{S as oe,a as le,b as ie,c as ne,d as O}from"./select-BqrgrOas.js";import{u as de}from"./useQuery-BEMaX6S8.js";import"./index-D5w6tM8m.js";import"./Combination-BJv6NSEb.js";import"./index-z0-V-lU6.js";import"./index-BoUYBFaC.js";import"./index-DRosYylb.js";import"./react-number-format.es-C6TcdqBX.js";import"./chevron-down-lpqsW9lE.js";import"./command-DF-KUbv3.js";import"./index-C8Qjzrxd.js";import"./search-8CyYJVSP.js";import"./popover-D4FvDG7G.js";import"./string-utils-DZ7LWdPC.js";import"./index-Dtymrjkl.js";import"./use-auth-BWk16BUZ.js";import"./chevrons-up-down-DXmsIWP1.js";import"./index-Cap87g99.js";function S({className:t,...r}){return e.jsx("div",{"data-slot":"skeleton",className:D("bg-accent animate-pulse rounded-md",t),...r})}const w="outlet_cart_v1",P=d.createContext(void 0),ce=({children:t})=>{const[r,n]=d.useState(()=>{try{const s=localStorage.getItem(w);return s?JSON.parse(s):[]}catch{return[]}});d.useEffect(()=>{try{localStorage.setItem(w,JSON.stringify(r))}catch{}},[r]);const l=(s,o=1)=>{n(p=>{const a=p.findIndex(h=>h.id===s.id&&h.priceTableId==s.priceTableId);if(a>=0){const h=[...p];return h[a]={...h[a],quantity:h[a].quantity+o},h}return[...p,{...s,quantity:o}]})},i=s=>{n(o=>o.filter(p=>p.id!==s))},b=(s,o)=>{n(p=>p.map(a=>a.id===s?{...a,quantity:o}:a).filter(a=>a.quantity>0))},x=()=>n([]),c=d.useMemo(()=>r.reduce((s,o)=>s+o.quantity,0),[r]),u=d.useMemo(()=>r.reduce((s,o)=>s+o.quantity*o.price,0),[r]),j={items:r,totalItems:c,totalPrice:u,addItem:l,removeItem:i,updateItemQuantity:b,clearCart:x};return e.jsx(P.Provider,{value:j,children:t})},q=()=>{const t=d.useContext(P);if(!t)throw new Error("useOutletCart must be used within an OutletCartProvider");return t},ue=({productId:t,description:r,price:n,priceTableId:l,className:i})=>{const{addItem:b}=q(),x=(c,u)=>u=="Outlet1"?e.jsxs("div",{className:"max-w-[200px]",children:["SKU: ",c," | + ICMS ST Quando Houver",e.jsx("br",{}),"Tabela Pre√ßo: Outlet1",e.jsx("br",{}),e.jsxs("p",{children:["Os produtos desta categoria s√£o novos. Tanto podem ser produtos de anos anteriores, produtos que sa√≠ram de linha ou produtos com excesso de estoque. Estes produtos tem a mesma garantia Thule de acordo com o seu Grupo de Produto. ",e.jsx("br",{}),e.jsx("br",{}),e.jsx("span",{className:"font-semibold",children:"Aten√ß√£o: A imagem √© meramente ilustrativa."})]})]}):u=="Outlet2"?e.jsxs("div",{className:"max-w-[200px]",children:["SKU: ",c," | + ICMS ST Quando Houver",e.jsx("br",{}),"Tabela Pre√ßo: Outlet2",e.jsx("br",{}),e.jsxs("p",{children:["Os produtos da categoria 2 s√£o novos e nunca foram utilizados, no entanto, podem apresentar a sua embalagem amassada ou danificada, mas os produtos n√£o tem marcas e tampouco riscos. Por esse motivo, s√£o produtos que n√£o podem ser expostos como novos na loja. Estes produtos tem a mesma garantia Thule de acordo com o seu Grupo de Produto.",e.jsx("br",{}),e.jsx("br",{}),e.jsx("span",{className:"font-semibold",children:"Aten√ß√£o: A imagem √© meramente ilustrativa."})]})]}):u=="Outlet3"?e.jsxs("div",{className:"max-w-[200px]",children:["SKU: ",c," | + ICMS ST Quando Houver",e.jsx("br",{}),"Tabela Pre√ßo: Outlet3",e.jsx("br",{}),e.jsxs("p",{children:["Os produtos da categoria 3 apresentam alguns sinais como pequenas marcas, pequenos riscos, que n√£o comprometem a sua utiliza√ß√£o. Podem ser, por exemplo, produtos que voltaram de exposi√ß√µes, eventos ou devolu√ß√µes. Tamb√©m podem ser produtos novos com alguma pequena varia√ß√£o de cor que n√£o obedecem 100% dos nossos padr√µes de qualidade. Estes produtos n√£o apresentam desgaste e tem a mesma garantia Thule de acordo com o seu Grupo de Produto.",e.jsx("br",{}),e.jsx("br",{}),e.jsx("span",{className:"font-semibold",children:"Aten√ß√£o: A imagem √© meramente ilustrativa."})]})]}):u=="Outlet4"?e.jsxs("div",{className:"max-w-[200px]",children:["SKU: ",c," | + ICMS ST Quando Houver",e.jsx("br",{}),"Tabela Pre√ßo: Outlet4",e.jsx("br",{}),e.jsxs("p",{children:["Nesta categoria 4, o produto pode apresentar marcas, riscos mais vis√≠veis ou apresentar sinais claros que j√° foi utilizado de alguma forma. Todos os produtos Outlet passam por uma revis√£o e os seus defeitos n√£o comprometem a sua utiliza√ß√£o. Estes produtos tem a mesma garantia Thule, mas apenas para o seu funcionamento e n√£o para defeitos visuais. O Prazo de Garantia √© de acordo com o seu Grupo de Produto. ",e.jsx("br",{}),e.jsx("br",{}),e.jsx("span",{className:"font-semibold",children:"Aten√ß√£o: A imagem √© meramente ilustrativa."})]})]}):"";return e.jsx("div",{className:i,children:e.jsxs(G,{children:[e.jsxs(Q,{children:[e.jsx(F,{className:"text-center font-semibold",children:r}),e.jsx(N,{message:x(t,l),className:"bg-black text-white",indicatorClassName:"bg-black text-black fill-black",children:e.jsx(H,{className:"flex items-center relative justify-center",children:e.jsx(A,{productId:t,productName:r,alt:t,className:"w-[128px] h-[128px]",expandOnClick:!0})})})]}),e.jsxs(K,{className:"flex items-center justify-center flex-col",children:[e.jsxs("div",{className:"flex items-center justify-center w-full font-bold text-red-600 text-xl",children:["R$ ",C(n,2)]}),e.jsxs("div",{className:"flex w-full gap-x-3 items-center justify-center",children:[e.jsxs("span",{className:"text-sm",children:["SKU: ",t]}),e.jsx("div",{className:"h-[16px] border-l"}),e.jsx("span",{className:"text-sm",children:"+ ICMS ST (quando houver)"})]}),e.jsxs("div",{className:"mt-1 text-xs",children:["Outlet: ",l]})]}),e.jsx(M,{className:"flex items-center justify-center",children:e.jsx(N,{message:x(t,l),className:"bg-black text-white",indicatorClassName:"bg-black text-black fill-black",children:e.jsx(f,{onClick:()=>b({id:t,name:r,price:n,priceTableId:l}),children:"Adicionar ao carrinho"})})})]})})},me=()=>{const[t,r]=d.useState(void 0),[n,l]=d.useState(!1),{totalItems:i,totalPrice:b,items:x,updateItemQuantity:c,removeItem:u,clearCart:j}=q(),s=I(),o=()=>{j(),l(!1)},p=()=>{if(!t){T.info("Selecione o Cliente Primeiro");return}if(i==0){T.info("Sem produtos no carrinho para gerar o pedido!");return}const a={customerId:t.id,customer:t,paymentConditionId:t.paymentConditionId,deliveryLocationId:t.deliveryLocations[0].id,branchId:t.branchId,items:x};sessionStorage.setItem("b2b@outletOrderData",JSON.stringify(a)),s({to:"/orders/new-outlet-order"})};return e.jsxs(B,{open:n,onOpenChange:l,children:[e.jsx($,{asChild:!0,children:e.jsxs(f,{variant:i==0?"default":"green",children:[e.jsx(te,{}),i," Produtos"]})}),e.jsxs(J,{className:"min-w-fit w-6/12",children:[e.jsxs(V,{children:[e.jsx(_,{children:"Produtos no Carrinho"}),e.jsx(Y,{hidden:!0})]}),i==0&&e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("h2",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-5xl",children:"ü•≤"}),e.jsx("p",{className:"text-lg font-semibold",children:"Seu carrinho ainda est√° vazio!"})]}),e.jsx(f,{variant:"ghost",className:"cursor-pointer text-blue-600",onClick:()=>l(!1),children:"Clique aqui para adicionar produtos"})]}),i>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(X,{children:"Cliente:"}),e.jsx(L,{onSelect:a=>r(a)})]}),e.jsx("div",{children:e.jsxs(Z,{className:"w-full table-auto",children:[e.jsx(ee,{children:e.jsxs(y,{className:"hover:bg-gray-200 bg-gray-200 border border-gray-300",children:[e.jsx(m,{className:"border border-gray-300",children:"Produto"}),e.jsx(m,{className:"border border-gray-300",children:"Descri√ß√£o"}),e.jsx(m,{className:"border border-gray-300",children:"Outlet"}),e.jsx(m,{className:"border border-gray-300",children:"Quantidade"}),e.jsx(m,{className:"border border-gray-300",children:"Pre√ßo"}),e.jsx(m,{className:"border border-gray-300",children:"Total"}),e.jsx(m,{className:"border border-gray-300",children:"A√ß√µes"})]})}),e.jsx(se,{children:x.map((a,h)=>e.jsxs(y,{className:"hover:bg-inherit",children:[e.jsx(g,{className:"border",children:a.id}),e.jsx(g,{className:"border",children:e.jsx("p",{className:"text-wrap text-xs",children:a.name})}),e.jsx(g,{children:a.priceTableId}),e.jsx(g,{className:"border w-[140px]",children:e.jsx(U,{min:0,max:999,step:1,onValueChange:k=>c(a.id,k??1),value:a.quantity})}),e.jsxs(g,{className:"text-right border w-[120px]",children:["R$ ",C(a.price,2)]}),e.jsxs(g,{className:"text-right border w-[120px]",children:["R$ ",C(a.price*a.quantity,2)]}),e.jsx(g,{className:"border",children:e.jsx("div",{className:"flex items-center justify-center gap-x-1",children:e.jsx(f,{size:"sm",variant:"destructive",onClick:()=>u(a.id),children:e.jsx(re,{className:"size-4"})})})})]},h))}),e.jsx(ae,{className:"bg-neutral-200",children:e.jsxs(y,{children:[e.jsx(m,{colSpan:5,className:"border border-neutral-300",children:"Total:"}),e.jsxs(m,{className:"border border-neutral-300 text-right",children:["R$ ",C(b,2)]}),e.jsx(m,{className:"border border-neutral-300"})]})})]})})]}),e.jsx(W,{className:"",children:i>0&&e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(f,{variant:"destructive",onClick:()=>o(),children:"Esvaziar Carrinho"}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx(f,{size:"sm",className:"text-sm",onClick:()=>{p()},children:"Gerar Pedido"}),e.jsx(f,{size:"sm",className:"text-sm",variant:"secondary",onClick:()=>l(!1),children:"Adicionar mais Produtos"})]})]})})]})]})},v=()=>e.jsxs("div",{className:"flex gap-x-4 w-full items-center justify-center",children:[e.jsx(S,{className:"h-[376px] w-[340px] rounded-lg bg-neutral-200"}),e.jsx(S,{className:"h-[376px] w-[340px] rounded-lg bg-neutral-200"}),e.jsx(S,{className:"h-[376px] w-[340px] rounded-lg bg-neutral-200"})]}),Ue=function(){const[r,n]=d.useState(""),[l,i]=d.useState("all"),b=z();async function x(){const s={searchText:r,searchField:"productId",currentPage:0,pageSize:1e4,sortField:"productId",sortAsc:!0,priceTableId:l},{data:o}=await E.post("/outlet/list-paged",s);return o}const{data:c,isLoading:u}=de({queryKey:["outlet-products",l],queryFn:x}),j=s=>s=="Outlet1"?e.jsxs("div",{className:"max-w-[200px]",children:["Tabela Pre√ßo: Outlet1",e.jsx("br",{}),e.jsx("p",{children:"Os produtos desta categoria s√£o novos. Tanto podem ser produtos de anos anteriores, produtos que sa√≠ram de linha ou produtos com excesso de estoque. Estes produtos tem a mesma garantia Thule de acordo com o seu Grupo de Produto."})]}):s=="Outlet2"?e.jsxs("div",{className:"max-w-[200px]",children:["Tabela Pre√ßo: Outlet2",e.jsx("br",{}),e.jsx("p",{children:"Os produtos da categoria 2 s√£o novos e nunca foram utilizados, no entanto, podem apresentar a sua embalagem amassada ou danificada, mas os produtos n√£o tem marcas e tampouco riscos. Por esse motivo, s√£o produtos que n√£o podem ser expostos como novos na loja. Estes produtos tem a mesma garantia Thule de acordo com o seu Grupo de Produto."})]}):s=="Outlet3"?e.jsxs("div",{className:"max-w-[200px]",children:["Tabela Pre√ßo: Outlet3",e.jsx("br",{}),e.jsx("p",{children:"Os produtos da categoria 3 apresentam alguns sinais como pequenas marcas, pequenos riscos, que n√£o comprometem a sua utiliza√ß√£o. Podem ser, por exemplo, produtos que voltaram de exposi√ß√µes, eventos ou devolu√ß√µes. Tamb√©m podem ser produtos novos com alguma pequena varia√ß√£o de cor que n√£o obedecem 100% dos nossos padr√µes de qualidade. Estes produtos n√£o apresentam desgaste e tem a mesma garantia Thule de acordo com o seu Grupo de Produto."})]}):s=="Outlet4"?e.jsxs("div",{className:"max-w-[200px]",children:["Tabela Pre√ßo: Outlet4",e.jsx("br",{}),e.jsx("p",{children:"Nesta categoria 4, o produto pode apresentar marcas, riscos mais vis√≠veis ou apresentar sinais claros que j√° foi utilizado de alguma forma. Todos os produtos Outlet passam por uma revis√£o e os seus defeitos n√£o comprometem a sua utiliza√ß√£o. Estes produtos tem a mesma garantia Thule, mas apenas para o seu funcionamento e n√£o para defeitos visuais. O Prazo de Garantia √© de acordo com o seu Grupo de Produto."})]}):"";return d.useEffect(()=>{b.invalidateQueries({queryKey:["outlet-products"]})},[r,l]),e.jsx(ce,{children:e.jsxs("div",{className:"m-2 p-2 bg-white border shadow rounded w-full relative",children:[e.jsxs("h1",{className:"font-semibold text-lg flex items-center justify-between mb-2",children:["Produtos em Outlet",e.jsxs("div",{className:"flex items-center justify-center gap-x-2",children:[e.jsx(R,{placeholder:"Buscar Produto",value:r,onChange:s=>n(s.target.value)}),e.jsxs(oe,{value:l,onValueChange:s=>i(s),children:[e.jsx(le,{children:e.jsx(ie,{placeholder:"Filtrar Outlet"})}),e.jsxs(ne,{children:[e.jsx(O,{value:"all",children:"Todos os Outlets"}),e.jsx(O,{value:"Outlet1",children:"Outlet 1"}),e.jsx(O,{value:"Outlet2",children:"Outlet 2"}),e.jsx(O,{value:"Outlet3",children:"Outlet 3"}),e.jsx(O,{value:"Outlet4",children:"Outlet 4"})]})]}),e.jsx(me,{})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[u&&e.jsxs(e.Fragment,{children:[e.jsx(v,{}),e.jsx(v,{}),e.jsx(v,{}),e.jsx(v,{}),e.jsx(v,{}),e.jsx(v,{})]}),c?.result.map((s,o)=>e.jsx(ue,{productId:s.productId,description:s.description,priceTableId:s.priceTableId,price:s.price,photo:s.photo},o))]}),e.jsxs("div",{className:"flex gap-x-2 items-center border w-full bg-slate-100 p-2 rounded-md text-sm fixed bottom-0",children:[e.jsx("div",{children:"Descri√ß√£o dos Outlet:"}),e.jsx(N,{message:j("Outlet1"),className:"bg-black text-white",indicatorClassName:"bg-black text-black fill-black",children:e.jsx("div",{className:"border bg-neutral-600/25 text-neutral-700 px-2 py-1.5 rounded cursor-pointer",children:"Outlet 1"})}),e.jsx(N,{message:j("Outlet2"),className:"bg-black text-white",indicatorClassName:"bg-black text-black fill-black",children:e.jsx("div",{className:"border bg-neutral-600/50 text-neutral-700 px-2 py-1.5 rounded cursor-pointer",children:"Outlet 2"})}),e.jsx(N,{message:j("Outlet3"),className:"bg-black text-white",indicatorClassName:"bg-black text-black fill-black",children:e.jsx("div",{className:"border bg-neutral-600/75 text-white px-2 py-1.5 rounded cursor-pointer",children:"Outlet 3"})}),e.jsx(N,{message:j("Outlet4"),className:"bg-black text-white",indicatorClassName:"bg-black text-black fill-black",children:e.jsx("div",{className:"border bg-neutral-600 text-white px-2 py-1.5 rounded cursor-pointer",children:"Outlet 4"})})]})]})})};export{Ue as component};
