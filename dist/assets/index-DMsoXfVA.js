import{g as o,o as b,ae as l,a6 as f,s as x,r as p,j as e,t as u,h as P,e as j,ac as v}from"./index-C-yn2kxu.js";import{A as C}from"./app-page-header-B97b6w1v.js";import{u as $}from"./useQuery-BEMaX6S8.js";import{u as I,F as w}from"./form-wZZtDwF0.js";import{a as A}from"./zod-CLHPmu1F.js";import{F as d}from"./form-input-BKjCpg4m.js";import{F}from"./form-checkbox-D26YLDfI.js";import{B as y}from"./index-Cj-kxx9Z.js";import"./label-PvIEZhsH.js";import"./input-Dr2m_CVc.js";import"./checkbox-BvWHDgRj.js";import"./index-D5w6tM8m.js";import"./index-Cap87g99.js";import"./index-BoUYBFaC.js";import"./index-DRosYylb.js";import"./minus-Cc6YOJ9G.js";class S{static basePath="registrations/payment-conditions";static async getAll(){return(await o.get(`/${this.basePath}/all`)).data}static async getById(t){return(await o.get(`/${this.basePath}/id/${t}`)).data}static async listPaged(t){return(await o.post(`/${this.basePath}/list-paged`,t)).data}static async create(t){return(await o.post(`/${this.basePath}`,t)).data}static async update(t,a){return(await o.patch(`/${this.basePath}/${t}`,a)).data}static async delete(t){await o.delete(`/${this.basePath}/${t}`)}}const D=b({id:l(),name:x(),isActive:f(),additionalDiscountPercent:l()}),E=({initialData:r,mode:t,onClose:a})=>{const[n,i]=p.useState(!1),s=I({resolver:A(D),defaultValues:{id:0,name:"",isActive:!0,additionalDiscountPercent:0}}),h=async c=>{try{i(!0),await o.patch("/registrations/payment-conditions",c),u.success("Condição de Pagamento alterada com sucesso!"),a(!0),i(!1)}catch(m){console.log(m),u.error(P(m))}finally{i(!1)}};p.useEffect(()=>{r&&s.reset(r)},[r]);const g=t=="VIEW";return e.jsx(w,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(h,c=>console.log(c)),className:"space-y-4",children:[e.jsx(d,{readOnly:!0,control:s.control,name:"id",label:"Código"}),e.jsx(d,{control:s.control,name:"name",label:"Descrição"}),e.jsx(F,{control:s.control,name:"isActive",label:"Ativa p/Venda"}),e.jsx(d,{control:s.control,name:"additionalDiscountPercent",label:"% Desconto Adicional",type:"number"}),e.jsxs("div",{className:"flex items-end justify-end gap-x-2",children:[!g&&e.jsx(y,{disabled:n,type:"submit",variant:"green",children:"Gravar"}),e.jsx(y,{disabled:n,type:"button",variant:"secondary",onClick:()=>a(!1),children:"Voltar p/Lista"})]})]})})},J=function(){const t=j(),{conditionId:a}=v({from:"/_app/registrations/payment-conditions/$conditionId/"}),{data:n}=$({queryKey:["payment-condition-id",a],queryFn:async()=>await S.getById(Number(a)),enabled:!!a});if(n)return e.jsx(C,{titleSlot:`Alterar Condição de Pagamento: ${a}`,children:e.jsx("div",{className:"p-2 max-w-lg ml-auto mr-auto",children:e.jsx(E,{initialData:n,isOpen:!0,mode:"EDIT",onClose:()=>t({to:"/registrations/payment-conditions"})})})})};export{J as component};
