import{o as b,a7 as d,s as m,r as p,j as e,g as n,t as u,h as x,e as j,ac as S}from"./index-C-yn2kxu.js";import{B as g}from"./index-Cj-kxx9Z.js";import{u as w,F as v}from"./form-wZZtDwF0.js";import{a as F}from"./zod-CLHPmu1F.js";import{F as I}from"./form-input-BKjCpg4m.js";import{F as f}from"./form-textarea-Clc_Qz6G.js";import{u as P}from"./useQuery-BEMaX6S8.js";import{A as $}from"./app-page-header-B97b6w1v.js";import"./label-PvIEZhsH.js";import"./input-Dr2m_CVc.js";import"./textarea-Ce4OrkIc.js";const C=b({id:d(m()),name:d(m()),content:d(m())}),E=({initialData:r,mode:t,onClose:s})=>{const[o,i]=p.useState(!1),a=w({resolver:F(C),defaultValues:{id:"",name:"",content:""}}),h=async l=>{try{let c={...l};i(!0),await n.patch("/admin/settings",c),u.success("Configuração alterada com sucesso!"),s(!0),i(!1)}catch(c){console.log(c),u.error(x(c))}finally{i(!1)}};p.useEffect(()=>{a.reset(r)},[r]);const y=t=="VIEW";return e.jsx(v,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(h,l=>console.log(l)),className:"space-y-4",children:[e.jsx(I,{readOnly:!0,control:a.control,name:"id",label:"Código"}),e.jsx(f,{readOnly:!0,control:a.control,name:"name",label:"Nome",rows:2}),e.jsx(f,{control:a.control,name:"content",label:"Conteúdo",rows:5}),e.jsxs("div",{className:"flex items-end justify-end gap-x-2",children:[!y&&e.jsx(g,{disabled:o,type:"submit",variant:"green",children:"Gravar"}),e.jsx(g,{disabled:o,type:"button",variant:"secondary",onClick:()=>s(!1),children:"Voltar p/Lista"})]})]})})};class N{basePath="admin/settings";async getAll(){return(await n.get(`/${this.basePath}/all`)).data}async getById(t){return(await n.get(`/${this.basePath}/${t}`)).data}async listPaged(t){return(await n.post(`/${this.basePath}/list-paged`,t)).data}async update(t){return(await n.patch(`/${this.basePath}`,t)).data}async delete(t){await n.delete(`/${this.basePath}/${t}`)}}const H=function(){const t=j(),{settingId:s}=S({from:"/_app/admin/settings/$settingId/"}),{data:o}=P({queryKey:["setting-id",s],queryFn:async()=>await new N().getById(s),enabled:!!s});if(o)return e.jsx($,{titleSlot:`Alterar Configuração: ${s}`,children:e.jsx("div",{className:"p-2",children:e.jsx(E,{initialData:o,isOpen:!0,mode:"EDIT",onClose:()=>t({to:"/admin/settings"})})})})};export{H as component};
