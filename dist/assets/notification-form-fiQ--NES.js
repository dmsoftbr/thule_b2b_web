import{o as j,a7 as h,s as a,r as d,j as o,g as f,t as n,h as y}from"./index-C-yn2kxu.js";import{B as u}from"./index-Cj-kxx9Z.js";import{u as F,F as v}from"./form-wZZtDwF0.js";import{a as E}from"./zod-CLHPmu1F.js";import{F as p}from"./form-input-BKjCpg4m.js";import{F as b}from"./form-textarea-Clc_Qz6G.js";import{v as N}from"./v4-BKrj-4V8.js";const I=j({id:a(),title:a(),message:a(),imageUrl:h(a())}),A=({initialData:t,mode:r,onClose:c})=>{const[m,i]=d.useState(!1),s=F({resolver:E(I),defaultValues:{id:r=="ADD"?N():"",title:"",message:""}}),x=async l=>{try{let e={...l};i(!0),r=="ADD"?(await f.post("/mobile/notifications",e),n.success("Notificação criada com sucesso!")):(await f.patch("/mobile/notifications",e),n.success("Notificação alterada com sucesso!")),c(!0),i(!1)}catch(e){console.log(e),n.error(y(e))}finally{i(!1)}};d.useEffect(()=>{t&&s.reset(t)},[t]);const g=r=="VIEW";return o.jsx(v,{...s,children:o.jsxs("form",{onSubmit:s.handleSubmit(x,l=>console.log(l)),className:"space-y-4",children:[o.jsx(p,{readOnly:!0,control:s.control,name:"id",label:"Identificador"}),o.jsx(p,{control:s.control,name:"title",label:"Título"}),o.jsx(b,{control:s.control,name:"message",label:"Mensagem",rows:4}),o.jsx(b,{control:s.control,name:"imageUrl",label:"Endereço (URL) de uma imagem para exibição",maxLength:5e3,rows:4}),o.jsxs("div",{className:"flex items-end justify-end gap-x-2",children:[!g&&o.jsx(u,{disabled:m,type:"submit",variant:"green",children:"Gravar"}),o.jsx(u,{disabled:m,type:"button",variant:"secondary",onClick:()=>c(!1),children:"Voltar p/Lista"})]})]})})};export{A as M};
