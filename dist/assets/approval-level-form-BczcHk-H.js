import{o as h,s as m,j as e,r as u,g as x,t as p,h as g}from"./index-C-yn2kxu.js";import{B as j}from"./index-Cj-kxx9Z.js";import{a as b,b as y,c as A,d as S,e as F,u as I,F as E}from"./form-wZZtDwF0.js";import{a as C}from"./zod-CLHPmu1F.js";import{F as f}from"./form-input-BKjCpg4m.js";import{S as N,a as D,b as L,c as U,d as v}from"./select-BqrgrOas.js";import{v as V}from"./v4-BKrj-4V8.js";const w=h({id:m(),description:m(),type:m()});function B({control:r,name:o="",label:n="",placeholder:c="Selecione uma opção",className:t,items:s,onValueChange:d}){return e.jsx(b,{control:r,name:o,render:({field:i})=>e.jsxs(y,{children:[e.jsx(A,{children:n}),e.jsxs(N,{onValueChange:a=>{i.onChange(a),d?.(a)},value:i.value.toString(),children:[e.jsx(S,{children:e.jsx(D,{className:t,children:e.jsx(L,{placeholder:c})})}),e.jsx(U,{children:s})]}),e.jsx(F,{})]})})}const R=({initialData:r,mode:o,onClose:n})=>{const[c,t]=u.useState(!1),s=I({resolver:C(w),defaultValues:{id:o=="ADD"?V():"",description:"",type:"UNIQUE"}}),d=async a=>{try{let l={...a,createdAt:new Date,updatedAt:new Date,createdBy:"",updatedBy:""};t(!0),o=="ADD"?(await x.post("/registrations/approval-levels",l),p.success("Alçada de Aprovação criada com sucesso!")):(await x.patch("/registrations/approval-levels",l),p.success("Alçada de Aprovação alterada com sucesso!")),n(!0),t(!1)}catch(l){console.log(l),p.error(g(l))}finally{t(!1)}};u.useEffect(()=>{r&&s.reset(r)},[r]);const i=o=="VIEW";return e.jsx(E,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(d,a=>console.log(a)),className:"space-y-4",children:[e.jsx(f,{readOnly:!0,control:s.control,name:"id",label:"Identificador"}),e.jsx(f,{control:s.control,name:"description",label:"Descrição"}),e.jsx(B,{control:s.control,name:"type",label:"Tipo",items:[e.jsx(v,{value:"UNIQUE",children:"Aprovador Único"},"UNIQUE"),e.jsx(v,{value:"CHAIN",children:"Cadeia"},"CHAIN")]}),e.jsxs("div",{className:"flex items-end justify-end gap-x-2",children:[!i&&e.jsx(j,{disabled:c,type:"submit",variant:"green",children:"Gravar"}),e.jsx(j,{disabled:c,type:"button",variant:"secondary",onClick:()=>n(!1),children:"Voltar p/Lista"})]})]})})};export{R as A};
