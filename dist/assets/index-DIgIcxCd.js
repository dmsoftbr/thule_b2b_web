import{j as t,r as x,l as f,e as b}from"./index-C-yn2kxu.js";import{A as v}from"./app-page-header-B97b6w1v.js";import{S as h}from"./server-table-OrazAZj6.js";import{M as l}from"./communications.service-Cn018XfU.js";import{B as s}from"./index-Cj-kxx9Z.js";import{S as g}from"./square-pen-C5Wms97H.js";import{T as y}from"./trash-DuwzUJ5T.js";import{S as C}from"./send-CWdkHzs0.js";import{f as j}from"./format-yjuT46Nz.js";import"./input-Dr2m_CVc.js";import"./app-tooltip-1VY1K540.js";import"./index-D5w6tM8m.js";import"./Combination-BJv6NSEb.js";import"./index-z0-V-lU6.js";import"./index-BoUYBFaC.js";import"./index-DRosYylb.js";import"./select-BqrgrOas.js";import"./index-Cap87g99.js";import"./chevron-down-lpqsW9lE.js";import"./index-Dtymrjkl.js";import"./search-8CyYJVSP.js";import"./funnel-CSCaqyL5.js";import"./loader-circle-BV1pYLGQ.js";import"./chevron-left-DklgzkMt.js";import"./chevron-right-CCWYEIpL.js";import"./en-US-BRsamj6P.js";const A=({fnEdit:i,fnDelete:n,fnSend:o})=>[{title:"Código",dataIndex:"id",key:"id",sortable:!0,renderItem:e=>t.jsx("span",{className:"text-blue-600 font-semibold",children:e.id})},{title:"Título",dataIndex:"title",key:"title",sortable:!0},{title:"Enviado em",dataIndex:"sentAt",key:"sentAt",sortable:!0,renderItem:e=>t.jsx("span",{children:e.sentAt?j(e.sentAt,"dd/MM/yyyy HH:mm:ss"):"Não Enviado"})},{title:"Mensagem",dataIndex:"message",key:"message",sortable:!1,renderItem:e=>t.jsx("span",{className:"text-xs",children:e.message})},{title:"Endereço do Documento (URL)",dataIndex:"contentUrl",key:"contentUrl",sortable:!1,renderItem:e=>t.jsx("span",{className:"text-xs",children:e.contentUrl})},{title:"Ações",dataIndex:"id",key:"actions",renderItem:e=>t.jsxs("div",{className:"flex flex-wrap gap-x-1 items-center",children:[t.jsx(s,{size:"sm",type:"button",onClick:()=>{i(e)},children:t.jsx(g,{className:"size-4"})}),t.jsx(s,{size:"sm",variant:"destructive",type:"button",onClick:()=>{n(e)},children:t.jsx(y,{className:"size-4"})}),t.jsx(s,{size:"sm",variant:"green",type:"button",onClick:()=>{o(e)},children:t.jsx(C,{className:"size-4"})})]})}],S=[{id:"id",label:"Código"},{id:"title",label:"Título"}],Y=function(){const[n,o]=x.useState(new Date().valueOf()),{showAppDialog:e}=f(),r=b(),m=()=>{r({to:"/mobile/communications/new-communicate"})},d=a=>{r({to:`/mobile/communications/${a.id}`})},c=async a=>{await e({type:"confirm",title:"Atenção",message:"Excluir este Comunicado?",buttons:[{text:"Excluir",variant:"danger",value:"ok",autoClose:!0},{text:"Cancelar",variant:"secondary",value:"",autoClose:!0}]})&&(await l.delete(a.id),o(new Date().valueOf()))},u=async a=>{await e({type:"confirm",title:"Atenção",message:"Liberar este comunicado a todos no App Mobile?",buttons:[{text:"Liberar",variant:"danger",value:"ok",autoClose:!0},{text:"Cancelar",variant:"secondary",value:"",autoClose:!0}]})&&(await l.send(a.id),o(new Date().valueOf()))};return t.jsx(v,{titleSlot:"Manutenção de Comunicados no App Mobile",children:t.jsx("div",{className:"p-2",children:t.jsx(h,{defaultSearchField:"title",defaultSortFieldDataIndex:"title",searchFields:S,columns:A({fnEdit:d,fnDelete:c,fnSend:u}),showAddButton:!0,onAdd:()=>m(),dataUrl:"/mobile/communications/list-paged"},n)})})};export{Y as component};
