import{o as j,a7 as h,s as t,r as d,j as o,g as u,t as l,h as y}from"./index-C-yn2kxu.js";import{B as f}from"./index-Cj-kxx9Z.js";import{u as v,F}from"./form-wZZtDwF0.js";import{a as E}from"./zod-CLHPmu1F.js";import{F as p}from"./form-input-BKjCpg4m.js";import{F as b}from"./form-textarea-Clc_Qz6G.js";import{v as I}from"./v4-BKrj-4V8.js";const L=j({id:t(),title:t(),message:t(),contentUrl:h(t())}),A=({initialData:a,mode:r,onClose:c})=>{const[m,n]=d.useState(!1),s=v({resolver:E(L),defaultValues:{id:r=="ADD"?I():"",title:"",message:""}}),x=async i=>{try{let e={...i};n(!0),r=="ADD"?(await u.post("/mobile/communications",e),l.success("Comunicado criado com sucesso!")):(await u.patch("/mobile/communications",e),l.success("Comunicado alterado com sucesso!")),c(!0),n(!1)}catch(e){console.log(e),l.error(y(e))}finally{n(!1)}};d.useEffect(()=>{a&&s.reset(a)},[a]);const g=r=="VIEW";return o.jsx(F,{...s,children:o.jsxs("form",{onSubmit:s.handleSubmit(x,i=>console.log(i)),className:"space-y-4",children:[o.jsx(p,{readOnly:!0,control:s.control,name:"id",label:"Identificador"}),o.jsx(p,{control:s.control,name:"title",label:"Título"}),o.jsx(b,{control:s.control,name:"message",label:"Mensagem",rows:4}),o.jsx(b,{control:s.control,name:"contentUrl",label:"Endereço (URL) do documento a ser enviado",maxLength:5e3,rows:4}),o.jsxs("div",{className:"flex items-end justify-end gap-x-2",children:[!g&&o.jsx(f,{disabled:m,type:"submit",variant:"green",children:"Gravar"}),o.jsx(f,{disabled:m,type:"button",variant:"secondary",onClick:()=>c(!1),children:"Voltar p/Lista"})]})]})})};export{A as M};
