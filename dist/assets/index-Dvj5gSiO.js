import{j as e,r as d,g as p,t as u,h}from"./index-C-yn2kxu.js";import{A as T}from"./app-page-header-B97b6w1v.js";import{B as E}from"./index-Cj-kxx9Z.js";import{L as C}from"./label-PvIEZhsH.js";import{f as g}from"./datetime-utils-C1Y3PBw1.js";import{f as l}from"./number-utils-BjpbXa09.js";import{f as A}from"./string-utils-DZ7LWdPC.js";import{D as B,a as F,b as M,c as b,d as y}from"./dropdown-menu-3YsRMfS2.js";import{D as O}from"./date-range-picker-BU7Niqh5.js";import{R as U,a as k}from"./radio-group-SbalYX0g.js";import{T as G,a as _,b as j,c as H,d as $,e as P}from"./table-D5BP3akl.js";import{L as z}from"./loader-circle-BV1pYLGQ.js";import{C as Q}from"./chevron-down-lpqsW9lE.js";import"./en-US-BRsamj6P.js";import"./endOfMonth-6ZWhWynV.js";import"./pt-BR-ruWP6cy_.js";import"./index-D5w6tM8m.js";import"./select-BqrgrOas.js";import"./Combination-BJv6NSEb.js";import"./index-z0-V-lU6.js";import"./index-BoUYBFaC.js";import"./index-Cap87g99.js";import"./index-DRosYylb.js";import"./popover-D4FvDG7G.js";import"./calendar-D1sFkhYR.js";import"./format-yjuT46Nz.js";import"./chevron-left-DklgzkMt.js";import"./chevron-right-CCWYEIpL.js";import"./circle-Br_5G2ba.js";const I=()=>[{key:"nrPedCli",dataIndex:"nrPedCli",title:"Pedido",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{className:"font-semibold text-blue-600 ",children:t.nrPedCli}),sortable:!0},{key:"nomeAbrev",dataIndex:"nomeAbrev",title:"Cliente",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{className:"font-semibold text-blue-600 ",children:t.nomeAbrev}),sortable:!0},{key:"noAbRepPri",dataIndex:"noAbRepPri",title:"Representante",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{children:t.noAbRepPri}),sortable:!0},{key:"nrSequencia",dataIndex:"nrSequencia",title:"Seq",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{children:t.nrSequencia}),sortable:!0},{key:"itCodigo",dataIndex:"itCodigo",title:"Item",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{children:t.itCodigo}),sortable:!0},{key:"descItem",dataIndex:"descItem",title:"Descrição",cellClassName:"text-xs !min-w-[200px]",className:"text-xs !min-w-[200px]",renderItem:t=>e.jsx("span",{children:t.descItem}),sortable:!0},{key:"codFamilia",dataIndex:"codFamilia",title:"Família",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{children:t.codFamilia}),sortable:!0},{key:"codModelo",dataIndex:"codModelo",title:"Modelo",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{children:A(t.codModelo)}),sortable:!0},{key:"qtPedida",dataIndex:"qtPedida",title:"Qt.Pedida",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{children:l(t.qtPedida,0)}),sortable:!0},{key:"qtAtendida",dataIndex:"qtAtendida",title:"Qt.Atendida",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{children:l(t.qtAtendida,0)}),sortable:!0},{key:"vlPreuni",dataIndex:"vlPreuni",title:"Preço Unit.",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{children:l(t.vlPreuni,2)}),sortable:!0},{key:"dtEntregaOrig",dataIndex:"dtEntregaOrig",title:"Dt. Requerida",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{children:g(t.dtEntregaOrig)}),sortable:!0},{key:"dtEntrega",dataIndex:"dtEntrega",title:"Dt. Entrega",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{children:g(t.dtEntrega)}),sortable:!0},{key:"prioridade",dataIndex:"prioridade",title:"Prioridade",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{children:t.prioridade}),sortable:!0},{key:"situacao",dataIndex:"situacao",title:"Situação",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{children:t.situacao}),sortable:!0},{key:"aliquotaIcm",dataIndex:"aliquotaIcm",title:"% ICMS",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{children:l(t.aliquotaIcm,2)}),sortable:!0},{key:"aliqPiscof",dataIndex:"aliquotaliqPiscofaIcm",title:"% PIS/COFINS",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{children:l(t.aliqPiscof,2)}),sortable:!0},{key:"aliqIpi",dataIndex:"aliqIpi",title:"% IPI",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{children:l(t.aliqIpi,2)}),sortable:!0},{key:"totLiquido",dataIndex:"totLiquido",title:"Total Líquido",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{children:l(t.totLiquido,2)}),sortable:!0},{key:"totBruto",dataIndex:"totBruto",title:"Total Bruto",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{children:l(t.totBruto,2)}),sortable:!0},{key:"observacao",dataIndex:"observacao",title:"Observações",cellClassName:"text-xs",className:"text-xs",renderItem:t=>e.jsx("span",{children:t.observacao}),sortable:!0}],ge=function(){const[N,o]=d.useState(!1),[c,w]=d.useState(new Date),[x,v]=d.useState(new Date),[n,D]=d.useState(1),[f,q]=d.useState([]),L=async()=>{o(!0);try{const a=await p.post("/reports/orders-list/pdf",{dtInicio:c,dtTermino:x,situacao:n},{responseType:"blob"}),i=new Blob([a.data],{type:"application/pdf"}),r=window.URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.target="_blank",s.download="ListaDePedidos.pdf",document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)}catch(a){u.error(h(a))}finally{o(!1)}},R=async()=>{o(!0);try{const a=await p.post("/reports/orders-list/xlsx",{dtInicio:c,dtTermino:x,situacao:n},{responseType:"blob"}),i=new Blob([a.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=window.URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.target="_blank",s.download="ListaDePedidos.xlsx",document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)}catch(a){u.error(h(a))}finally{o(!1)}},S=async()=>{o(!0);try{const{data:a}=await p.post("/reports/orders-list",{dtInicio:c,dtTermino:x,situacao:n});q(a)}catch(a){console.log(a),u.error(h(a))}finally{o(!1)}};return e.jsx(T,{titleSlot:"Lista de Pedidos",children:e.jsxs("div",{style:{display:"grid",gridTemplateRows:"auto 1fr auto",height:"100%",maxWidth:"100%",overflow:"hidden",paddingBottom:"24px"},children:[e.jsxs("div",{className:"p-2 flex gap-x-2",children:[e.jsxs("div",{className:"form-group flex-0",children:[e.jsx(C,{children:"Tipo do Relatório"}),e.jsxs(U,{defaultValue:n.toString(),value:n.toString(),onValueChange:a=>D(Number(a)),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{value:"1",id:"rptCarteira"}),"Carteira"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{value:"2",id:"rptTodosPedidos"}),"Todos os Pedidos"]})]})]}),e.jsxs("div",{className:"form-group flex-1 min-w-0",children:[e.jsx(C,{children:"Período"}),e.jsx(O,{initialDateFrom:c,initialCompareTo:x,onUpdate:a=>{w(a.range.from),v(a.range.to??new Date)}})]}),e.jsxs(B,{children:[e.jsx(F,{asChild:!0,children:e.jsx(E,{className:"mt-5",disabled:N,children:N?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:e.jsx(z,{className:"size-4 mr-2 animate-spin"})}),"Gerando..."]}):e.jsxs(e.Fragment,{children:["Gerar"," ",e.jsx("span",{children:e.jsx(Q,{className:"size-4"})})]})})}),e.jsxs(M,{children:[e.jsx(b,{onClick:()=>S(),children:"Em Tela"}),e.jsx(y,{}),e.jsx(b,{onClick:()=>L(),children:"Em PDF"}),e.jsx(y,{}),e.jsx(b,{onClick:()=>R(),children:"Em Excel"})]})]})]}),e.jsx("div",{style:{overflow:"auto",padding:"0 8px 8px 8px",minHeight:0},children:e.jsx("div",{className:"border rounded-md",children:e.jsxs(G,{className:"border",children:[e.jsx(_,{children:e.jsx(j,{children:I().map(a=>e.jsx(H,{className:"border border-neutral-300 bg-neutral-200",children:a.title},a.key))})}),e.jsx($,{children:f.length==0?e.jsx(j,{children:e.jsx(P,{colSpan:I.length,className:"h-24 text-center",children:"Sem dados para exibir"})}):f.map((a,i)=>e.jsx(j,{children:I().map((r,s)=>e.jsx(P,{className:"border",children:r.renderItem?.(a)??(()=>{const m=a[r.dataIndex];return m instanceof Date?m.toLocaleDateString():m})()},`CELL_${r.key}_${s}`))},`ROW_${i}`))})]})})})]})})};export{ge as component};
