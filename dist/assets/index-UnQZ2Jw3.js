import{e as R,k as T,l as k,r,j as e,g as d}from"./index-C-yn2kxu.js";import{A as O}from"./app-page-header-B97b6w1v.js";import{S as V}from"./server-table-OrazAZj6.js";import{a as c,c as L}from"./columns-D4mfFbWR.js";import{L as l}from"./label-PvIEZhsH.js";import{S as u,c as B}from"./search-combo-DoY-PKU3.js";import{u as E}from"./useQuery-BEMaX6S8.js";import{D as m}from"./date-picker-BTPigZqt.js";import{B as p}from"./index-Cj-kxx9Z.js";import"./input-Dr2m_CVc.js";import"./app-tooltip-1VY1K540.js";import"./index-D5w6tM8m.js";import"./Combination-BJv6NSEb.js";import"./index-z0-V-lU6.js";import"./index-BoUYBFaC.js";import"./index-DRosYylb.js";import"./select-BqrgrOas.js";import"./index-Cap87g99.js";import"./chevron-down-lpqsW9lE.js";import"./index-Dtymrjkl.js";import"./search-8CyYJVSP.js";import"./funnel-CSCaqyL5.js";import"./loader-circle-BV1pYLGQ.js";import"./chevron-left-DklgzkMt.js";import"./chevron-right-CCWYEIpL.js";import"./calendar-D1sFkhYR.js";import"./en-US-BRsamj6P.js";import"./format-yjuT46Nz.js";import"./endOfMonth-6ZWhWynV.js";import"./dropdown-menu-3YsRMfS2.js";import"./datetime-utils-C1Y3PBw1.js";import"./pt-BR-ruWP6cy_.js";import"./number-utils-BjpbXa09.js";import"./order-status-utils-2CmP70Fi.js";import"./square-pen-C5Wms97H.js";import"./menu-DLE56LUh.js";import"./square-x-CeG2MJkX.js";import"./dollar-sign-B45EOowh.js";import"./command-DF-KUbv3.js";import"./index-C8Qjzrxd.js";import"./popover-D4FvDG7G.js";import"./chevrons-up-down-DXmsIWP1.js";import"./calendar-1-D0a8d8XV.js";const $=[{id:"orderId",label:"Pedido"},{id:"customerAbbreviation",label:"Abrev. Cliente"},{id:"customerId",label:"Cód. Cliente"},{id:"representativeId",label:"Cód. Representante"},{id:"RepresentativeAbbreviation",label:"Abrev. Representante"},{id:"CustomerDocumentNumber",label:"CPF/CNPJ Cliente"},{id:"CustomerName",label:"Razão Social Cliente"}],Pe=function(){const o=R(),v=T(),{showAppDialog:b}=k(),[x,s]=r.useState(new Date().valueOf()),[i,f]=r.useState(new Date(c(new Date,{days:-30}))),[n,h]=r.useState(new Date),[S,C]=r.useState([]),[A,w]=r.useState([]),g=()=>{o({to:"/orders/new-order"})},j=t=>{o({to:`/orders/edit/${t.id}`})},D=(t,a)=>{if(a){const P=v.buildLocation({to:`/orders/view/${t.id}`});window.open(P.url,"_blank")}else o({to:`/orders/view/${t.id}`})},F=async t=>{await b({message:"Cancelar este Pedido?",title:"Atenção",type:"question",buttons:[{text:"Continuar",variant:"danger",autoClose:!0,value:!0},{text:"Fechar",variant:"secondary",autoClose:!0,value:!1}]})&&(await d.delete(`/orders/${t.id}`),s(new Date().valueOf()))},{data:N}=E({queryKey:["representatives"],queryFn:async()=>{const{data:t}=await d.get("/registrations/representatives/all");return t}}),y=()=>{s(new Date().valueOf())},I=()=>e.jsxs("div",{className:"mt-2 flex gap-x-2 flex-wrap bg-blue-100 p-2 rounded-md",children:[e.jsx("div",{children:e.jsxs("div",{className:"form-group",children:[e.jsx(l,{children:"Período de Inclusão"}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(m,{defaultValue:i,onValueChange:t=>f(t)})," ","a"," ",e.jsx(m,{defaultValue:n,onValueChange:t=>h(t)})]})]})}),e.jsxs("div",{className:"form-group flex-1",children:[e.jsx(l,{children:"Representante"}),e.jsx(u,{multipleSelect:!0,onChange:()=>{},onSelectOption:t=>C(t.map(a=>Number(a.value))),staticItems:B(N??[],"id","abbreviation"),showSelectButtons:!0})]}),e.jsxs("div",{className:"form-group flex-1",children:[e.jsx(l,{children:"Situação do Pedido"}),e.jsx(u,{multipleSelect:!0,onChange:()=>{},onSelectOption:t=>w(t.map(a=>Number(a.value))),staticItems:[{value:"1",label:"Aberto"},{value:"2",label:"Faturado Parcial"},{value:"3",label:"Faturado Total"},{value:"4",label:"Pendente"},{value:"5",label:"Suspenso"},{value:"6",label:"Cancelado"},{value:"-1",label:"Aprovação"},{value:"-2",label:"Reprovado"},{value:"-3",label:"Excluído"}],showSelectButtons:!0})]}),e.jsxs("div",{className:"flex gap-x-2 mt-5",children:[e.jsx(p,{onClick:()=>{y()},children:"Aplicar Filtro"}),e.jsx(p,{onClick:()=>{s(new Date().valueOf())},children:"Limpar Filtro"})]})]});return e.jsx(O,{titleSlot:"Pedidos de Venda",children:e.jsx("div",{className:"p-2",children:e.jsx(V,{defaultSearchField:"orderId",defaultSortFieldDataIndex:"createdAt",defaultSortDesc:!0,searchFields:$,columns:L({fnEdit:j,fnCancel:F,fnView:D}),showAddButton:!0,onAdd:()=>g(),dataUrl:"/orders/list-paged",advancedFilterSlot:I(),showAdvancedFilter:!0,additionalInfo:{statusIds:A,representativeIds:S,createdAtFrom:i??new Date(c(new Date,{days:-30})),createdAtTo:n??new Date}},x)})})};export{Pe as component};
